import{S as h,i as p,s as g,x as v,e as y,c as w,b as S,f as d,h as b,j as $,y as j,z as D,A,B as C,C as R,D as T,F as f,G as q,H as z}from"../chunks/vendor.1d15b6a5.js";import{b as M,d as _,c as O}from"../chunks/store.a5a53875.js";const P=!0,H=Object.freeze(Object.defineProperty({__proto__:null,prerender:P},Symbol.toStringTag,{value:"Module"}));function B(o){let s,n;const l=o[1].default,a=v(l,o,o[0],null);return{c(){s=y("div"),a&&a.c(),this.h()},l(e){s=w(e,"DIV",{class:!0});var t=S(s);a&&a.l(t),t.forEach(d),this.h()},h(){b(s,"class","main-container svelte-1wcfmqj")},m(e,t){$(e,s,t),a&&a.m(s,null),n=!0},p(e,[t]){a&&a.p&&(!n||t&1)&&j(a,l,e,e[0],n?A(l,e[0],t,null):D(e[0]),null)},i(e){n||(C(a,e),n=!0)},o(e){R(a,e),n=!1},d(e){e&&d(s),a&&a.d(e)}}}function E(o,s,n){let{$$slots:l={},$$scope:a}=s;const e=["/","product"];return T(()=>{console.log("mounting"),M.onAuthStateChanged(async t=>{const u=window.location.pathname;if(!t&&!e.includes(u)){window.location.href="/";return}if(t&&u==="/"){window.location.href="/dashboard";return}if(!t)return;let i;const m=f(_,"users",t.uid),c=await q(m);if(c.exists())i=c.data();else{const r=f(_,"user",t.uid);i={email:t.email,uid:t.uid},await z(r,i,{merge:!0})}O.update(r=>({...r,user:t,data:i,loading:!1}))})}),o.$$set=t=>{"$$scope"in t&&n(0,a=t.$$scope)},[a,l]}class I extends h{constructor(s){super(),p(this,s,E,B,g,{})}}export{I as component,H as universal};
