import{S as h,f as p,h as g,x as v,j as y,l as w,m as S,p as d,q as $,r as b,y as j,z as D,A as q,B as A,C,D as R,F as f,G as T,H as z}from"../chunks/vendor.3d0d1b4f.js";import{a as M,d as _}from"../chunks/firebase.377a4e15.js";import{a as O}from"../chunks/store.47ecd161.js";const P=!0,I=Object.freeze(Object.defineProperty({__proto__:null,prerender:P},Symbol.toStringTag,{value:"Module"}));function B(n){let o,s;const l=n[1].default,a=v(l,n,n[0],null);return{c(){o=y("div"),a&&a.c(),this.h()},l(e){o=w(e,"DIV",{class:!0});var t=S(o);a&&a.l(t),t.forEach(d),this.h()},h(){$(o,"class","main-container svelte-1wcfmqj")},m(e,t){b(e,o,t),a&&a.m(o,null),s=!0},p(e,[t]){a&&a.p&&(!s||t&1)&&j(a,l,e,e[0],s?q(l,e[0],t,null):D(e[0]),null)},i(e){s||(A(a,e),s=!0)},o(e){C(a,e),s=!1},d(e){e&&d(o),a&&a.d(e)}}}function E(n,o,s){let{$$slots:l={},$$scope:a}=o;const e=["/","product"];return R(()=>{console.log("mounting"),M.onAuthStateChanged(async t=>{const u=window.location.pathname;if(!t&&!e.includes(u)){window.location.href="/";return}if(t&&u==="/"){window.location.href="/dashboard";return}if(!t)return;let i;const m=f(_,"users",t.uid),c=await T(m);if(c.exists())i=c.data();else{const r=f(_,"user",t.uid);i={email:t.email,uid:t.uid},await z(r,i,{merge:!0})}O.update(r=>({...r,user:t,data:i,loading:!1}))})}),n.$$set=t=>{"$$scope"in t&&s(0,a=t.$$scope)},[a,l]}class L extends h{constructor(o){super(),p(this,o,E,B,g,{})}}export{L as component,I as universal};
