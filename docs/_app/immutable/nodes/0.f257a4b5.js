import{s as V,c as E,n as S,d as L,u as O,g as U,e as A,o as H}from"../chunks/scheduler.095dc040.js";import{S as j,i as x,g as m,s as q,h,j as k,c as T,x as C,f as g,k as u,a as z,y as f,z as R,d as $,t as y,b as P,r as B,u as G,v as F,w as J,p as K}from"../chunks/index.cf2b5a39.js";import{a as Q,s as D,b as W,g as N,d as I,c as X,m as Y,e as Z}from"../chunks/store.33c7b926.js";const tt=!0,ct=Object.freeze(Object.defineProperty({__proto__:null,prerender:tt},Symbol.toStringTag,{value:"Module"}));function et(c){let t,l,s,i,a,r,e="Log Out",n,o,d='<a href="/dashboard" class="svelte-q4kr6n">Demo</a> <a href="/fileTest" class="svelte-q4kr6n">Configure</a>',v,_;return{c(){t=m("div"),l=m("div"),s=m("img"),a=q(),r=m("button"),r.textContent=e,n=q(),o=m("nav"),o.innerHTML=d,this.h()},l(b){t=h(b,"DIV",{});var p=k(t);l=h(p,"DIV",{class:!0});var w=k(l);s=h(w,"IMG",{src:!0,alt:!0,width:!0}),a=T(w),r=h(w,"BUTTON",{button:!0,class:!0,["data-svelte-h"]:!0}),C(r)!=="svelte-1b2rkod"&&(r.textContent=e),w.forEach(g),n=T(p),o=h(p,"NAV",{class:!0,["data-svelte-h"]:!0}),C(o)!=="svelte-52lkzz"&&(o.innerHTML=d),p.forEach(g),this.h()},h(){E(s.src,i="/fulllogo_transparent.png")||u(s,"src",i),u(s,"alt","full logo"),u(s,"width","10%"),u(r,"button",""),u(r,"class","svelte-q4kr6n"),u(l,"class","head svelte-q4kr6n"),u(o,"class","svelte-q4kr6n")},m(b,p){z(b,t,p),f(t,l),f(l,s),f(l,a),f(l,r),f(t,n),f(t,o),v||(_=R(r,"click",Q.logout),v=!0)},p:S,i:S,o:S,d(b){b&&g(t),v=!1,_()}}}function st(c){return[]}class at extends j{constructor(t){super(),x(this,t,st,et,V,{})}}function M(c){let t,l;return t=new at({}),{c(){B(t.$$.fragment)},l(s){G(t.$$.fragment,s)},m(s,i){F(t,s,i),l=!0},i(s){l||($(t.$$.fragment,s),l=!0)},o(s){y(t.$$.fragment,s),l=!1},d(s){J(t,s)}}}function nt(c){let t,l,s,i,a=c[0].isUser&&M();const r=c[2].default,e=L(r,c,c[1],null);return{c(){t=m("div"),a&&a.c(),l=q(),s=m("div"),e&&e.c(),this.h()},l(n){t=h(n,"DIV",{});var o=k(t);a&&a.l(o),l=T(o),s=h(o,"DIV",{class:!0});var d=k(s);e&&e.l(d),d.forEach(g),o.forEach(g),this.h()},h(){u(s,"class","main-container svelte-1wcfmqj")},m(n,o){z(n,t,o),a&&a.m(t,null),f(t,l),f(t,s),e&&e.m(s,null),i=!0},p(n,[o]){n[0].isUser?a?o&1&&$(a,1):(a=M(),a.c(),$(a,1),a.m(t,l)):a&&(K(),y(a,1,1,()=>{a=null}),P()),e&&e.p&&(!i||o&2)&&O(e,r,n,n[1],i?A(r,n[1],o,null):U(n[1]),null)},i(n){i||($(a),$(e,n),i=!0)},o(n){y(a),y(e,n),i=!1},d(n){n&&g(t),a&&a.d(),e&&e.d(n)}}}function ot(c,t,l){let{$$slots:s={},$$scope:i}=t;const a=["/","product"];let r=!1;return D.subscribe(e=>{l(0,r=e)}),H(()=>{console.log("mounting"),W.onAuthStateChanged(async e=>{const n=window.location.pathname;if(!e&&!a.includes(n)){window.location.href="/";return}if(e&&n==="/"){window.location.href="/dashboard";return}if(e&&D.set({isUser:!0}),!e)return;let o;const d=N(I,"users",e.uid),v=await X(d);if(v.exists())o=v.data();else{const _=N(I,"user",e.uid);o={email:e.email,uid:e.uid},await Y(_,o,{merge:!0})}Z.update(_=>({..._,user:e,data:o,loading:!1}))})}),c.$$set=e=>{"$$scope"in e&&l(1,i=e.$$scope)},[r,i,s]}class ut extends j{constructor(t){super(),x(this,t,ot,nt,V,{})}}export{ut as component,ct as universal};
